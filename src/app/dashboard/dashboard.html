<div class="card welcome-card border-0 shadow-sm mb-4 position-relative overflow-hidden">
  <div class="card-body p-4">
    <h4 class="fw-bold mb-1">Welcome, Admin</h4>
    <p class="text-muted mb-0">Manage complaints and events smoothly from one place</p>
  </div>
</div>

<div class="row g-4">
  
  <div class="col-xl-8 col-lg-7">
    <div class="row g-3">
      <div class="col-md-6">
        <div class="stat-card border-blue">
          <div class="icon-circle bg-light-blue text-blue">
            <i class="bi bi-briefcase-fill"></i>
          </div>
          <div class="ms-3">
            <p class="mb-0 text-muted small">Total Complaint</p>
            <h2 class="fw-bold mb-0">{{stats().totalComplaints}}</h2>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="stat-card border-green">
          <div class="icon-circle bg-light-green text-green">
            <i class="bi bi-check-circle-fill"></i>
          </div>
          <div class="ms-3">
            <p class="mb-0 text-muted small">Resolved Complaint</p>
            <h2 class="fw-bold mb-0">{{stats().resolved}}</h2>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="stat-card border-yellow">
          <div class="icon-circle bg-light-yellow text-yellow">
            <i class="bi bi-arrow-repeat"></i>
          </div>
          <div class="ms-3">
            <p class="mb-0 text-muted small">In-progress Complaint</p>
            <h2 class="fw-bold mb-0">{{stats().inprogress}}</h2>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="stat-card border-red">
          <div class="icon-circle bg-light-red text-red">
            <i class="bi bi-exclamation-circle-fill"></i>
          </div>
          <div class="ms-3">
            <p class="mb-0 text-muted small">Pending Complaint</p>
            <h2 class="fw-bold mb-0">{{stats().pending}}</h2>
          </div>
        </div>
      </div>
    </div>

    <div class="mt-4">
  <h5 class="fw-bold mb-3">Recent Complaints</h5>
  @for (item of recentComplaints(); track item._id) {
    <div class="recent-item shadow-sm p-3 bg-white d-flex align-items-sm-center justify-content-between rounded-4 mb-3 flex-wrap flex-sm-nowrap">
      
      <div class="d-flex align-items-start align-items-sm-center overflow-hidden w-100">
        <span class="badge-id flex-shrink-0 full-id">{{ item._id.toUpperCase() }}</span>
        
        <div class="ms-3 text-truncate flex-grow-1">
          <h6 class="mb-0 fw-bold text-truncate">{{ item.complaintType }}</h6>
          <small class="text-muted d-block text-truncate">{{ item.locality }}</small>
        </div>
      </div>

      <div class="status-container mt-2 mt-sm-0 ms-sm-2 flex-shrink-0 text-end">
        <span class="status-pill" [ngClass]="getStatusClass(item.status)">
          {{ item.status }}
        </span>
      </div>

    </div>
  } @empty {
    <div class="text-center p-3 text-muted bg-white rounded-4 shadow-sm">No recent complaints found.</div>
  }
</div>
  </div>

  <div class="col-xl-4 col-lg-5">
    <div class="calendar-card shadow-sm border-0 rounded-4 overflow-hidden h-100">
      <div class="calendar-header bg-orange text-white p-3">
        <small class="d-block opacity-75">{{ viewDate() | date:'yyyy' }}</small>
        <h6 class="mb-0 fw-bold">{{ getFormattedHeaderDate() }}</h6>
      </div>
      
      <div class="calendar-body p-3 bg-white">
        <div class="calendar-container mb-4">
          <div class="d-flex justify-content-between align-items-center mb-3">
             <i class="bi bi-chevron-left text-muted cursor-pointer" (click)="changeMonth(-1)"></i>
             <span class="fw-bold text-orange">{{ viewDate() | date:'MMMM yyyy' }}</span>
             <i class="bi bi-chevron-right text-muted cursor-pointer" (click)="changeMonth(1)"></i>
          </div>

          <div class="calendar-grid">
            @for (dayName of ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa']; track dayName) {
              <div class="grid-header text-muted">{{ dayName }}</div>
            }
            @for (date of calendarDays(); track date) {
              <div class="grid-day" 
                   [class.not-current]="!isSameMonth(date)"
                   [class.today]="isToday(date)"
                   [class.selected]="isSelected(date)"
                   (click)="onDateSelect(date)">
                {{ date.getDate() }}
                @if (hasEvents(date)) { <span class="event-dot"></span> }
              </div>
            }
          </div>
        </div>
        
        <hr class="opacity-25">

        <div class="schedule-section mt-3">
          <h6 class="fw-bold small mb-3 text-secondary">Schedule Today</h6>
          <div class="d-flex flex-column gap-2">
            @for (event of filteredEvents(); track event._id) {
              <div class="schedule-item-card p-3 rounded-4 bg-orange-light text-white border-0 shadow-sm">
                <div class="fw-bold small">{{ event.eventTitle }}</div>
                <small class="opacity-75 d-block">
                  {{ event.startDate | date:'HH:mm' }} - {{ event.endDate | date:'HH:mm' }}
                </small>
              </div>
            } @empty {
              <div class="text-center py-4">
                <i class="bi bi-calendar-x text-muted opacity-25 fs-1"></i>
                <p class="text-muted small mt-2">No events found.</p>
              </div>
            }
          </div>
        </div>
      </div>
    </div>
  </div>
</div>