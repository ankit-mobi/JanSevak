<div class="container-fluid p-0">
  @if (complaint(); as c) {
    <div class="bg-white p-3 rounded-4 mb-4 shadow-sm d-flex align-items-center border-0">
      <button class="btn btn-light rounded-circle shadow-sm me-3 back-btn" (click)="goBack()">
        <i class="bi bi-arrow-left"></i>
      </button>
      <h5 class="fw-bold m-0">Complaint Details</h5>
    </div>

    <div class="row g-4">
      <div class="col-12 col-lg-8">
        <div class="card border-0 shadow-sm p-4 rounded-4 h-100">
          <h4 class="fw-bold mb-3">{{ c.title }}</h4>
          
         <div class="main-img-wrapper mb-4 text-center">
  @if (c.image) {
    <img [src]="c.image" class="img-fluid rounded-4 w-100 object-fit-cover shadow-sm" alt="complaint">
  } @else {
    <div class="p-5 bg-light rounded-4 text-muted">No Image Provided</div>
  }
</div>

          <div class="d-flex flex-wrap gap-4 mb-4 text-muted">
            <div class="d-flex align-items-center">
              <i class="bi bi-geo-alt text-orange me-2 fs-5"></i> 
              <span>{{ c.location }}</span>
            </div>
            <div class="d-flex align-items-center">
              <i class="bi bi-calendar-event text-orange me-2 fs-5"></i> 
              <span>Date: {{ c.date }}</span>
            </div>
          </div>

          <hr class="text-muted opacity-25">
          
          <div class="mt-3">
            <h6 class="fw-bold mb-2">Description</h6>
            <p class="text-secondary description-text">{{ c.description }}</p>
          </div>
        </div>
      </div>

      <div class="col-12 col-lg-4">
        <div class="d-flex flex-column gap-4">
          
          <div class="card border-0 shadow-sm p-4 rounded-4">
            <div class="mb-4">
              <h6 class="fw-bold mb-3">Status</h6>
              <select class="form-select bg-light rounded-3 py-2 border-0" [(ngModel)]="selectedStatus">
                <option value="Pending">Pending</option>
                <option value="Inprogress">Inprogress</option>
                <option value="Completed">Completed</option>
              </select>
            </div>

            <div class="mb-4">
              <h6 class="fw-bold mb-3">Reporter Information</h6>
              <div class="info-item d-flex align-items-center mb-3">
                <div class="icon-box me-3"><i class="bi bi-person text-muted"></i></div>
                <span class="fw-bold text-secondary">{{ c.reporter }}</span>
              </div>
              <div class="info-item d-flex align-items-center">
                <div class="icon-box me-3"><i class="bi bi-telephone text-muted"></i></div>
                <span class="text-secondary">{{ c.contact }}</span>
              </div>
            </div>

            <div class="mb-4">
  <h6 class="fw-bold mb-3">Complaint Closure Photo</h6>
  <div class="upload-container position-relative text-center p-4 rounded-4 border-dashed bg-light">
    <i class="bi bi-upload fs-3 text-muted mb-2 d-block"></i>
    
    @if (!selectedFile()) {
      <p class="small text-muted mb-0">Drag & Drop Image Here Or</p>
      <label class="text-primary fw-bold cursor-pointer">Select</label>
    } @else {
      <p class="small text-success fw-bold mb-0">Selected: {{ selectedFile()?.name }}</p>
      <button class="btn btn-sm btn-link text-danger" (click)="selectedFile.set(null)">Remove</button>
    }

    <input type="file" class="file-input-overlay" (change)="onFileSelected($event)" accept="image/*">
  </div>
</div>

            <div class="mb-2">
              <h6 class="fw-bold mb-3">Comments & Updates</h6>
              <textarea class="form-control bg-light rounded-3 border-0" rows="4" 
                        placeholder="Add a comments or updates" 
                        [(ngModel)]="newComment"></textarea>
            </div>
          </div>

          <div class="d-flex justify-content-end gap-2 mt-2">
            <button class="btn btn-cancel rounded-pill px-4" (click)="goBack()">Cancel</button>
            <button class="btn btn-update rounded-pill px-5 fw-bold text-white shadow" (click)="submitUpdates()">Update</button>
          </div>

        </div>
      </div>
    </div>
  }
</div>